<!-- KaffahMedia ‚Äî Content Detox Analyzer (Polished & Ready to Sell) -->
<div id="km-detox" style="max-width:820px;margin:28px auto;padding:0 14px;font-family:Inter,system-ui,Arial,sans-serif;">

  <!-- Header -->
  <div style="border-left:4px solid #c9a86a;padding:16px 18px;background:#1E90FF;margin-bottom:16px;">
    <h2 style="margin:0;font-size:1.45rem;color:#c9a86a;">Content Detox Analyzer ‚Äî KaffahMedia</h2>
    <p style="margin:6px 0 0 0;color:#fff;font-size:0.95rem;">
      <strong>Isi singkat dan dapatkan gambaran: seberapa kuat pengaruh Medsos terhadap kebiasaan Anda, plus rencana detox praktis</strong>
    </p>
  </div>

  <!-- Card -->
  <div style="background:#e6f7ff;border-radius:12px;padding:16px;box-shadow:0 6px 20px rgba(12,12,12,0.06);color:#111;">
    <!-- Form area -->
    <div id="km-form" style="display:block;">
      <div style="display:flex;gap:12px;flex-wrap:wrap;">
        <input id="kd_name" placeholder="Nama (opsional)" style="flex:1;min-width:180px;padding:10px;border:1px solid #e6e6e6;border-radius:8px;">
        <input id="kd_age" type="number" min="10" max="100" value="20" style="width:110px;padding:10px;border:1px solid #e6e6e6;border-radius:8px;">
      </div>

      <div style="margin-top:12px;">
        <label style="font-weight:600;font-size:0.95rem;color:#222;display:block;margin-bottom:6px;">Rata-rata jam / hari memakai Medsos</label>
        <input id="kd_hours" type="number" step="0.5" min="0" max="12" value="1" style="width:110px;padding:10px;border:1px solid #e6e6e6;border-radius:8px;">
      </div>

      <div style="margin-top:12px;">
        <label style="font-weight:600;font-size:0.95rem;color:#222;display:block;margin-bottom:6px;">Jenis konten dominan (centang yang sesuai)</label>
        <div style="display:flex;flex-wrap:wrap;gap:8px;">
          <label style="background:#fafafa;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
            <input class="kd_topic" type="checkbox" value="Edukasi"> Edukasi
          </label>
          <label style="background:#fafafa;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
            <input class="kd_topic" type="checkbox" value="Hiburan"> Hiburan
          </label>
          <label style="background:#fafafa;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
            <input class="kd_topic" type="checkbox" value="Lifestyle"> Lifestyle
          </label>
          <label style="background:#fafafa;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
            <input class="kd_topic" type="checkbox" value="Gosip"> Gosip
          </label>
          <label style="background:#fafafa;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
            <input class="kd_topic" type="checkbox" value="Religi"> Religi
          </label>
        </div>
      </div>
      <div style="margin-top:12px;">
  <label style="font-weight:600;font-size:0.95rem;color:#222;display:block;margin-bottom:6px;">
    Platform media sosial yang paling sering digunakan
  </label>

  <div style="display:flex;flex-wrap:wrap;gap:8px;">
    <label style="background:#f8fafc;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
      <input class="kd_platform" type="checkbox" value="TikTok"> TikTok
    </label>
    <label style="background:#f8fafc;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
      <input class="kd_platform" type="checkbox" value="Instagram"> Instagram
    </label>
    <label style="background:#f8fafc;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
      <input class="kd_platform" type="checkbox" value="YouTube"> YouTube
    </label>
    <label style="background:#f8fafc;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
      <input class="kd_platform" type="checkbox" value="Facebook"> Facebook
    </label>
    <label style="background:#f8fafc;padding:8px 10px;border-radius:8px;border:1px solid #eee;">
      <input class="kd_platform" type="checkbox" value="X"> X / Twitter
    </label>
  </div>
</div>


      <div style="margin-top:12px;">
        <label style="font-weight:600;font-size:0.95rem;color:#222;display:block;margin-bottom:6px;">Seberapa sering merasa 'tertekan' atau 'kurang puas' setelah scroll?</label>
        <select id="kd_mood" style="width:220px;padding:10px;border:1px solid #e6e6e6;border-radius:8px;">
          <option value="0">Jarang / Tidak pernah</option>
          <option value="1">Kadang</option>
          <option value="2">Sering</option>
          <option value="3">Hampir selalu</option>
        </select>
      </div>

      <div style="display:flex;gap:10px;margin-top:14px;align-items:center;">
        <button id="kd_run" style="background:#111;color:#fff;padding:10px 14px;border-radius:10px;border:none;cursor:pointer;font-weight:700;">Analisis Sekarang</button>
        <button id="kd_reset" style="background:transparent;color:#111;padding:8px 12px;border-radius:8px;border:1px solid #e6e6e6;cursor:pointer;">Reset</button>
        <div style="margin-left:auto;font-size:0.9rem;color:#666;">Model V.1 ‚Ä¢ data self-report</div>
      </div>
    </div>

    <!-- Result area (hidden initially) -->
    <div id="kd_result" style="display:none;margin-top:18px;padding:12px;border-radius:10px;background:#0f1720;color:#f7f7f7;">
      <!-- Content injected by JS -->
    </div>

   
     
      <div style="display:flex;gap:10px;">
        
     
      </div>
    </div>


  <!-- small footnote -->
  <div style="margin-top:10px;color:#666;font-size:0.92rem;">
     <a id="kd_contact" href="#" style="background:transparent;border:1px solid #111;color:#111;padding:10px 12px;border-radius:8px;text-decoration:none;">Tool ini dibuat oleh KaffahMedia,mohon tidak menyebarkan tanpa ijin dari tim @KaffahMedia</a>
  </div>
  </div>

<script>
(function(){
  function $(id){ return document.getElementById(id); }
  function $q(sel){ return Array.prototype.slice.call(document.querySelectorAll(sel)); }
   var resultBox = $('kd_result');
  var run = $('kd_run'), reset = $('kd_reset');
 

  function computeScore(hours, topicsCount, mood, age, topics){
    var score = 0;
    score += Math.min(hours,6) * 11;
    score += Math.min(topicsCount,5) * 5;
    score += mood * 8;
    // content weight: gosip lebih berat
    if(topics.includes('Gosip')) score += 4;
    var ageFactor = (age <= 20) ? 6 : (age <= 30 ? 4 : 2);
    score += ageFactor;
    return Math.round(Math.min(score,99));
  }

  function labelFor(score){
    if(score < 30) return {tag:'Aman', color:'#2e7d32', advice:'Pertahankan kebiasaan baik dan kurasi ringan.'};
    if(score < 55) return {tag:'Waspada', color:'#f57f17', advice:'Kurangi waktu menonton & mulai kurasi konten sehari-hari.'};
    if(score < 80) return {tag:'Terganggu', color:'#d84315', advice:'Pertimbangkan detox 14 hari; aktifkan timer & jurnal.'};
    return {tag:'Kecanduan Tinggi', color:'#b71c1c', advice:'Detox 30 hari intensif; libatkan keluarga.'};
  }

  function renderResult(name, score, algoIndex, topics, age, platforms){
    var lbl = labelFor(score);
    var html = `<div style="display:flex;align-items:center;gap:12px;">
      <div style="flex:1;">
        <div style="font-size:1.05rem;font-weight:700;">Hasil Analisis ‚Äî ${name||'Pengguna'}</div>
        <div style="margin-top:8px;font-size:0.95rem;color:#cbd5db;">Skor Ketergantungan</div>
        <div style="background:#e6edf2;border-radius:10px;height:14px;margin-top:8px;overflow:hidden;">
          <div id="kd_bar" style="height:100%;width:0%;background:linear-gradient(90deg,#c9a86a,#bfa063);border-radius:10px;transition:width 800ms ease;"></div>
        </div>
        <div style="margin-top:8px;font-size:0.95rem;color:#cbd5db;">
          <strong style="font-weight:800;color:${lbl.color}">${lbl.tag}</strong> ‚Äî <span id="kd_score">0</span>/100
        </div>
      </div>
      <div style="width:140px;text-align:right;">
        <div style="font-size:0.95rem;color:#cbd5db;">Algo Influence</div>
        <div style="font-size:1.4rem;font-weight:800;margin-top:6px;">${algoIndex}%</div>
      </div>
    </div>`;

   html += `
<hr style="border:none;border-top:1px solid rgba(255,255,255,0.06);margin:12px 0;">
<div style="font-size:0.95rem;color:#e6eef6;">
  <strong>Konten dominan:</strong> ${topics.join(', ')}
</div>
<div style="margin-top:6px;font-size:0.95rem;color:#e6eef6;">
  <strong>Platform utama:</strong> ${platforms.join(', ')}
</div>
`;

 function platformWeight(platforms){
  var w = 0;
  if(platforms.includes('TikTok')) w += 6;
  if(platforms.includes('Instagram')) w += 4;
  if(platforms.includes('YouTube')) w += 3;
  if(platforms.includes('Facebook')) w += 2;
  return w;
}
     
     html += `
<div style="margin-top:8px;font-size:0.95rem;color:#e6eef6;">
  <strong>Rekomendasi singkat:</strong> ${lbl.advice}
</div>
`;


    // CTA Buttons Snippet
    html += `<div style="margin-top:14px;"><div style="font-weight:700;margin-bottom:10px;">Rencana Detox Singkat</div>`;
    function ctaButton(url,label){ return `<a href="${url}" target="_blank" style="display:inline-block;margin:6px 8px 0 0;padding:10px 14px;border-radius:10px;background:#111;color:#fff;font-weight:700;font-size:0.9rem;text-decoration:none;box-shadow:0 4px 10px rgba(0,0,0,0.25);">${label}</a>`;}
    if(score < 30){
      html += ctaButton('#','üìò Panduan Kurasi Konten') + ctaButton('#','üìä Template Evaluasi Harian');
    } else if(score <= 50){
      html += ctaButton('#','üìò Panduan Detox Ringan') + ctaButton('#','üìä Monitoring Waktu & Emosi');
    } else if(score > 70){
      html += ctaButton('#','üåê Program Detox KaffahMedia') + ctaButton('#','üìä Detox Intensif 30 Hari') + ctaButton('#','üìù Konsultasi Pribadi');
    }
    html += '</div>';

    // age tip
    if(age<=24) html += '<div style="margin-top:10px;color:#e6eef6;"><strong>Tip Remaja:</strong> buat rutinitas belajar & ruang tanpa gadget; diskusi konten mengganggu dengan orang tua/guru.</div>';
    else html += '<div style="margin-top:10px;color:#e6eef6;"><strong>Tip Dewasa:</strong> tetapkan waktu keluarga bebas gadget; gunakan TikTok untuk edukasi, bukan pelampiasan emosi.</div>';

    resultBox.innerHTML = html;
    resultBox.style.display='block';



    // Animate score and bar
    let displayScore=0;
    let interval = setInterval(()=>{
      if(displayScore>=score){ clearInterval(interval); return; }
      displayScore++;
      $('kd_score').innerText = displayScore;
      $('kd_bar').style.width = Math.max(6,displayScore)+'%';
    },12);

    resultBox.scrollIntoView({behavior:'smooth', block:'center'});
  }

  run.addEventListener('click', function(){
    var name=$('kd_name').value.trim();
    var age=parseInt($('kd_age').value,10);
    var hours=parseFloat($('kd_hours').value);
    var mood=parseInt($('kd_mood').value,10);
    var topics=$q('.kd_topic:checked').map(n=>n.value);
    var platforms = $q('.kd_platform:checked').map(n => n.value);
if(platforms.length === 0) platforms = ['Tidak dispesifikkan'];


    // Validation
    if(isNaN(age) || age<10 || age>100){ alert('Masukkan umur valid antara 10‚Äì100'); return;}
    if(isNaN(hours) || hours<0){ alert('Masukkan jam valid'); return;}
    if(topics.length===0) topics=['Umum / Acak'];

    var score=computeScore(hours,topics.length,mood,age,topics);
    var algoIndex=Math.round((topics.length/5)*100*((hours>=2)?1.1:0.9));
    if(algoIndex<6) algoIndex=6;

 renderResult(name, score, algoIndex, topics, age, platforms);

  });

  reset.addEventListener('click',function(){
  $('kd_name').value='';
  $('kd_age').value=20;
  $('kd_hours').value=1;
  $('kd_mood').value=0;
  $q('.kd_topic').forEach(n=>n.checked=false);
  $q('.kd_platform').forEach(n=>n.checked=false);
  resultBox.style.display='none';
});
})();
 
</script>
